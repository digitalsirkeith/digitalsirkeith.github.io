<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Server-Client and Peer-Peer Communication Protocol </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
      /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
      a.info {
          /* This is the key. */
          position: relative;
          z-index: 24;
          text-decoration: none;
      }
      a.info:hover {
          z-index: 25;
          color: #FFF; background-color: #900;
      }
      a.info span { display: none; }
      a.info:hover span.info {
          /* The span will display just on :hover state. */
          display: block;
          position: absolute;
          font-size: smaller;
          top: 2em; left: -5em; width: 15em;
          padding: 2px; border: 1px solid #333;
          color: #900; background-color: #EEE;
          text-align: left;
      }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  max-width: 55em;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Message Formats">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Introduction">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Serverbound Messages">
<link href="#rfc.section.2.2.1" rel="Chapter" title="2.2.1 Login">
<link href="#rfc.section.2.2.2" rel="Chapter" title="2.2.2 SetUsername">
<link href="#rfc.section.2.2.3" rel="Chapter" title="2.2.3 RequestUserInfo">
<link href="#rfc.section.2.2.4" rel="Chapter" title="2.2.4 RequestLocalTime">
<link href="#rfc.section.2.2.5" rel="Chapter" title="2.2.5 WhisperToUser">
<link href="#rfc.section.2.2.6" rel="Chapter" title="2.2.6 SendChat">
<link href="#rfc.section.2.2.7" rel="Chapter" title="2.2.7 RequestOnlineList">
<link href="#rfc.section.2.2.8" rel="Chapter" title="2.2.8 Disconnect">
<link href="#rfc.section.2.2.9" rel="Chapter" title="2.2.9 KickUser">
<link href="#rfc.section.2.2.10" rel="Chapter" title="2.2.10 MuteUser">
<link href="#rfc.section.2.2.11" rel="Chapter" title="2.2.11 UnmuteUser">
<link href="#rfc.section.2.2.12" rel="Chapter" title="2.2.12 SetAsAdmin">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Clientbound Messages">
<link href="#rfc.section.2.3.1" rel="Chapter" title="2.3.1 AssignUsername">
<link href="#rfc.section.2.3.2" rel="Chapter" title="2.3.2 SetUsername">
<link href="#rfc.section.2.3.3" rel="Chapter" title="2.3.3 ProvideUserInfo">
<link href="#rfc.section.2.3.4" rel="Chapter" title="2.3.4 SendLocalTime">
<link href="#rfc.section.2.3.5" rel="Chapter" title="2.3.5 WhisperFromUser">
<link href="#rfc.section.2.3.6" rel="Chapter" title="2.3.6 SendChatFromUser">
<link href="#rfc.section.2.3.7" rel="Chapter" title="2.3.7 SendOnlineList">
<link href="#rfc.section.2.3.8" rel="Chapter" title="2.3.8 KickUser">
<link href="#rfc.section.2.3.9" rel="Chapter" title="2.3.9 MuteUser">
<link href="#rfc.section.2.3.10" rel="Chapter" title="2.3.10 UnmuteUser">
<link href="#rfc.section.2.3.11" rel="Chapter" title="2.3.11 SetAsAdmin">
<link href="#rfc.section.2.3.12" rel="Chapter" title="2.3.12 ServerMessage">
<link href="#rfc.section.2.3.13" rel="Chapter" title="2.3.13 Disconnect">
<link href="#rfc.section.2.4" rel="Chapter" title="2.4 Peer-Peer Messages">
<link href="#rfc.section.2.4.1" rel="Chapter" title="2.4.1 Discovery">
<link href="#rfc.section.2.4.2" rel="Chapter" title="2.4.2 DiscoveryResponse">
<link href="#rfc.section.2.4.3" rel="Chapter" title="2.4.3 Handshake">
<link href="#rfc.section.2.4.4" rel="Chapter" title="2.4.4 HandshakeResponse">
<link href="#rfc.section.2.4.5" rel="Chapter" title="2.4.5 SendChat">
<link href="#rfc.section.2.4.6" rel="Chapter" title="2.4.6 Whisper">
<link href="#rfc.section.2.4.7" rel="Chapter" title="2.4.7 Disconnect">
<link href="#rfc.section.3" rel="Chapter" title="3 Server-Client Model">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 States / Phases">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 Login">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Request-Response Behavior">
<link href="#rfc.section.3.2.1" rel="Chapter" title="3.2.1 SetUsername">
<link href="#rfc.section.3.2.2" rel="Chapter" title="3.2.2 UserInfo">
<link href="#rfc.section.3.2.3" rel="Chapter" title="3.2.3 LocalTime">
<link href="#rfc.section.3.2.4" rel="Chapter" title="3.2.4 Whisper">
<link href="#rfc.section.3.2.5" rel="Chapter" title="3.2.5 SendChat">
<link href="#rfc.section.3.2.6" rel="Chapter" title="3.2.6 OnlineList">
<link href="#rfc.section.3.2.7" rel="Chapter" title="3.2.7 Disconnect">
<link href="#rfc.section.3.2.8" rel="Chapter" title="3.2.8 KickUser">
<link href="#rfc.section.3.2.9" rel="Chapter" title="3.2.9 MuteUser">
<link href="#rfc.section.3.2.10" rel="Chapter" title="3.2.10 UnmuteUser">
<link href="#rfc.section.3.2.11" rel="Chapter" title="3.2.11 SetAsAdmin">
<link href="#rfc.section.4" rel="Chapter" title="4 Peer-Peer Model">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Discovery">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Handshake">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Disconnect">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Introduction">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Authentication">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Encryption">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Authenticity">
<link href="#rfc.references" rel="Chapter" title="6 References">
<link href="#rfc.references.1" rel="Chapter" title="6.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="6.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.40.1 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Vargas, K., Balucan, P., Uy, C., and G. Mabanta" />
  <meta name="dct.identifier" content="urn:ietf:id:coe-151-mp1-protocol-05" />
  <meta name="dct.issued" scheme="ISO8601" content="2020-03-17" />
  <meta name="dct.abstract" content="This document describes the communication protocol of the server-client model and peer-peer model. This will not cover rules and restrictions for implementations of the control logic and processing of user input. Message formats are described along with their use cases. Handshake / login, state transitions, and terminations are also described below.   " />
  <meta name="description" content="This document describes the communication protocol of the server-client model and peer-peer model. This will not cover rules and restrictions for implementations of the control logic and processing of user input. Message formats are described along with their use cases. Handshake / login, state transitions, and terminations are also described below.   " />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">CoE 151</td>
<td class="right">K. Vargas</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">P. Balucan</td>
</tr>
<tr>
<td class="left">Updates: 5 (if approved)</td>
<td class="right">C. Uy</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">G. Mabanta</td>
</tr>
<tr>
<td class="left">Expires: September 18, 2020</td>
<td class="right">EEEI</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">March 17, 2020</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Server-Client and Peer-Peer Communication Protocol <br />
  <span class="filename">coe-151-mp1-protocol-05</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document describes the communication protocol of the server-client model and peer-peer model. This will not cover rules and restrictions for implementations of the control logic and processing of user input. Message formats are described along with their use cases. Handshake / login, state transitions, and terminations are also described below.  </p>
<h1><a>Disclaimer</a></h1>
<p>The template used is from <a href="#RFC3470" class="xref">[RFC3470]</a>. The document attempts to follow guidelines set in <a href="#RFC6949" class="xref">[RFC6949]</a>.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at https://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 18, 2020.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2020 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Message Formats</a>
</li>
<ul><li>2.1.   <a href="#rfc.section.2.1">Introduction</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Serverbound Messages</a>
</li>
<ul><li>2.2.1.   <a href="#rfc.section.2.2.1">Login</a>
</li>
<li>2.2.2.   <a href="#rfc.section.2.2.2">SetUsername</a>
</li>
<li>2.2.3.   <a href="#rfc.section.2.2.3">RequestUserInfo</a>
</li>
<li>2.2.4.   <a href="#rfc.section.2.2.4">RequestLocalTime</a>
</li>
<li>2.2.5.   <a href="#rfc.section.2.2.5">WhisperToUser</a>
</li>
<li>2.2.6.   <a href="#rfc.section.2.2.6">SendChat</a>
</li>
<li>2.2.7.   <a href="#rfc.section.2.2.7">RequestOnlineList</a>
</li>
<li>2.2.8.   <a href="#rfc.section.2.2.8">Disconnect</a>
</li>
<li>2.2.9.   <a href="#rfc.section.2.2.9">KickUser</a>
</li>
<li>2.2.10.   <a href="#rfc.section.2.2.10">MuteUser</a>
</li>
<li>2.2.11.   <a href="#rfc.section.2.2.11">UnmuteUser</a>
</li>
<li>2.2.12.   <a href="#rfc.section.2.2.12">SetAsAdmin</a>
</li>
</ul><li>2.3.   <a href="#rfc.section.2.3">Clientbound Messages</a>
</li>
<ul><li>2.3.1.   <a href="#rfc.section.2.3.1">AssignUsername</a>
</li>
<li>2.3.2.   <a href="#rfc.section.2.3.2">SetUsername</a>
</li>
<li>2.3.3.   <a href="#rfc.section.2.3.3">ProvideUserInfo</a>
</li>
<li>2.3.4.   <a href="#rfc.section.2.3.4">SendLocalTime</a>
</li>
<li>2.3.5.   <a href="#rfc.section.2.3.5">WhisperFromUser</a>
</li>
<li>2.3.6.   <a href="#rfc.section.2.3.6">SendChatFromUser</a>
</li>
<li>2.3.7.   <a href="#rfc.section.2.3.7">SendOnlineList</a>
</li>
<li>2.3.8.   <a href="#rfc.section.2.3.8">KickUser</a>
</li>
<li>2.3.9.   <a href="#rfc.section.2.3.9">MuteUser</a>
</li>
<li>2.3.10.   <a href="#rfc.section.2.3.10">UnmuteUser</a>
</li>
<li>2.3.11.   <a href="#rfc.section.2.3.11">SetAsAdmin</a>
</li>
<li>2.3.12.   <a href="#rfc.section.2.3.12">ServerMessage</a>
</li>
<li>2.3.13.   <a href="#rfc.section.2.3.13">Disconnect</a>
</li>
</ul><li>2.4.   <a href="#rfc.section.2.4">Peer-Peer Messages</a>
</li>
<ul><li>2.4.1.   <a href="#rfc.section.2.4.1">Discovery</a>
</li>
<li>2.4.2.   <a href="#rfc.section.2.4.2">DiscoveryResponse</a>
</li>
<li>2.4.3.   <a href="#rfc.section.2.4.3">Handshake</a>
</li>
<li>2.4.4.   <a href="#rfc.section.2.4.4">HandshakeResponse</a>
</li>
<li>2.4.5.   <a href="#rfc.section.2.4.5">SendChat</a>
</li>
<li>2.4.6.   <a href="#rfc.section.2.4.6">Whisper</a>
</li>
<li>2.4.7.   <a href="#rfc.section.2.4.7">Disconnect</a>
</li>
</ul></ul><li>3.   <a href="#rfc.section.3">Server-Client Model</a>
</li>
<ul><li>3.1.   <a href="#rfc.section.3.1">States / Phases</a>
</li>
<ul><li>3.1.1.   <a href="#rfc.section.3.1.1">Login</a>
</li>
</ul><li>3.2.   <a href="#rfc.section.3.2">Request-Response Behavior</a>
</li>
<ul><li>3.2.1.   <a href="#rfc.section.3.2.1">SetUsername</a>
</li>
<li>3.2.2.   <a href="#rfc.section.3.2.2">UserInfo</a>
</li>
<li>3.2.3.   <a href="#rfc.section.3.2.3">LocalTime</a>
</li>
<li>3.2.4.   <a href="#rfc.section.3.2.4">Whisper</a>
</li>
<li>3.2.5.   <a href="#rfc.section.3.2.5">SendChat</a>
</li>
<li>3.2.6.   <a href="#rfc.section.3.2.6">OnlineList</a>
</li>
<li>3.2.7.   <a href="#rfc.section.3.2.7">Disconnect</a>
</li>
<li>3.2.8.   <a href="#rfc.section.3.2.8">KickUser</a>
</li>
<li>3.2.9.   <a href="#rfc.section.3.2.9">MuteUser</a>
</li>
<li>3.2.10.   <a href="#rfc.section.3.2.10">UnmuteUser</a>
</li>
<li>3.2.11.   <a href="#rfc.section.3.2.11">SetAsAdmin</a>
</li>
</ul></ul><li>4.   <a href="#rfc.section.4">Peer-Peer Model</a>
</li>
<ul><li>4.1.   <a href="#rfc.section.4.1">Discovery</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Handshake</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Disconnect</a>
</li>
</ul><li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<ul><li>5.1.   <a href="#rfc.section.5.1">Introduction</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Authentication</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Encryption</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">Authenticity</a>
</li>
</ul><li>6.   <a href="#rfc.references">References</a>
</li>
<ul><li>6.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>6.2.   <a href="#rfc.references.2">Informative References</a>
</li>
</ul><li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Chat servers are simple applications if written by a single entity. The lack of implementation rules adds complexity on ensuring that two applications communicate with each other properly.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#mtypes" id="mtypes">Message Formats</a>
</h1>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#mintro" id="mintro">Introduction</a>
</h1>
<p id="rfc.section.2.1.p.1">Messages sent by both server-client and peer-peer models shall be encoded in JavaScript Object Notation (JSON). This is to simplify the parsing process in the individual implementations. There are several valid fields of the messages for this protocol. Message formats are identified by the field "mtp". The particular information for the rest of the fields will be discussed in detail in their respective use cases in the message formats.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#serverbound" id="serverbound">Serverbound Messages</a>
</h1>
<h1 id="rfc.section.2.2.1">
<a href="#rfc.section.2.2.1">2.2.1.</a> <a href="#Login" id="Login">Login</a>
</h1>
<p id="rfc.section.2.2.1.p.1">This is the first packet a client should send to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.1.p.2">{"mtp": "Login", "data": {"name": "username"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Login Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All Login messages have this value set to "Login"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Client Name. The username that the client requests to use to join the server.</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.1.p.3">The server must send an AssignUsername message as a response to this message. This is discussed in detail in <a href="#server-client-state-login" class="xref">Section 3.1.1</a> </p>
<h1 id="rfc.section.2.2.2">
<a href="#rfc.section.2.2.2">2.2.2.</a> <a href="#SetUsername" id="SetUsername">SetUsername</a>
</h1>
<p id="rfc.section.2.2.2.p.1">On the scenario that a client wishes to change usernames, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.2.p.2">{"mtp": "SetUsername", "data": {"name": "new_name"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SetUsername Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SetUsername messages have this value set to "SetUsername"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Requested new name by the client.</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.2.p.3">The server must send a SetUsername message as a response to this message. This is discussed in detail in <a href="#server-client-behavior-changename" class="xref">Section 3.2.1</a> </p>
<h1 id="rfc.section.2.2.3">
<a href="#rfc.section.2.2.3">2.2.3.</a> <a href="#RequestUserInfo" id="RequestUserInfo">RequestUserInfo</a>
</h1>
<p id="rfc.section.2.2.3.p.1">On the scenario that a client wishes to view a user's network information, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.3.p.2">{"mtp": "RequestUserInfo", "data": {"name": "username"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>RequestUserInfo Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All RequestUserInfo messages have this value set to "RequestUserInfo"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Name of the user whose information is being requested.</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.3.p.3">The server must send a ProvideUserInfo message as a response to this message. This is discussed in detail in <a href="#server-client-behavior-userinfo" class="xref">Section 3.2.2</a> </p>
<h1 id="rfc.section.2.2.4">
<a href="#rfc.section.2.2.4">2.2.4.</a> <a href="#RequestLocalTime" id="RequestLocalTime">RequestLocalTime</a>
</h1>
<p id="rfc.section.2.2.4.p.1">On the scenario that a client wishes to change usernames, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.4.p.2">{"mtp": "RequestLocalTime", "data": {}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>RequestLocalTime Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody><tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All RequestLocalTime messages have this value set to "RequestLocalTime"</td>
</tr></tbody>
</table>
<p id="rfc.section.2.2.4.p.3">The server must send a SendLocalTime message as a response to this message. This is discussed in detail in <a href="#server-client-behavior-localtime" class="xref">Section 3.2.3</a> </p>
<h1 id="rfc.section.2.2.5">
<a href="#rfc.section.2.2.5">2.2.5.</a> <a href="#WhisperToUser" id="WhisperToUser">WhisperToUser</a>
</h1>
<p id="rfc.section.2.2.5.p.1">On the scenario that a client wishes to send a private message to another user, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.5.p.2">{"mtp": "WhisperToUser", "data": {"to": ["user1", "user2", "user3"], "message": "hi"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>WhisperToUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All WhisperToUser messages have this value set to "WhisperToUser"</td>
</tr>
<tr>
<td class="left">to</td>
<td class="left">array of strings</td>
<td class="center">List of users the private message is addressed to.</td>
</tr>
<tr>
<td class="left">message</td>
<td class="left">string</td>
<td class="center">The private message to be sent.</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.5.p.3">Behavior is discussed in detail in <a href="#server-client-behavior-whisper" class="xref">Section 3.2.4</a> </p>
<h1 id="rfc.section.2.2.6">
<a href="#rfc.section.2.2.6">2.2.6.</a> <a href="#SendChat" id="SendChat">SendChat</a>
</h1>
<p id="rfc.section.2.2.6.p.1">On the scenario that a client wishes to send a message to everyone online, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.6.p.2">{"mtp": "SendChat", "data": {"message": "hi"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SendChat Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SendChat messages have this value set to "SendChat"</td>
</tr>
<tr>
<td class="left">message</td>
<td class="left">string</td>
<td class="center">The message to be sent.</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.6.p.3">Behavior is discussed in detail in <a href="#server-client-behavior-sendchat" class="xref">Section 3.2.5</a> </p>
<h1 id="rfc.section.2.2.7">
<a href="#rfc.section.2.2.7">2.2.7.</a> <a href="#RequestOnlineList" id="RequestOnlineList">RequestOnlineList</a>
</h1>
<p id="rfc.section.2.2.7.p.1">On the scenario that a client wishes to know all online users in the server, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.7.p.2">{"mtp": "RequestOnlineList", "data": {}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>RequestOnlineList Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody><tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All RequestOnlineList messages have this value set to "RequestOnlineList"</td>
</tr></tbody>
</table>
<p id="rfc.section.2.2.7.p.3">Behavior is discussed in detail in <a href="#server-client-behavior-onlinelist" class="xref">Section 3.2.6</a> </p>
<h1 id="rfc.section.2.2.8">
<a href="#rfc.section.2.2.8">2.2.8.</a> <a href="#Disconnect" id="Disconnect">Disconnect</a>
</h1>
<p id="rfc.section.2.2.8.p.1">On the scenario that a client wishes to disconnect, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.8.p.2">{"mtp": "Disconnect", "data": {}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Disconnect Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody><tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All Disconnect messages have this value set to "Disconnect"</td>
</tr></tbody>
</table>
<p id="rfc.section.2.2.8.p.3">Behavior is discussed in detail in <a href="#server-client-behavior-disconnect" class="xref">Section 3.2.7</a> </p>
<h1 id="rfc.section.2.2.9">
<a href="#rfc.section.2.2.9">2.2.9.</a> <a href="#KickUser" id="KickUser">KickUser</a>
</h1>
<p id="rfc.section.2.2.9.p.1">On the scenario that an admin wishes to remove a user from the server, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.9.p.2">{"mtp": "KickUser", "data": {"name": "username"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>KickUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All KickUser messages have this value set to "KickUser"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Name of the user to be kicked out of the server</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.9.p.3">Behavior is discussed in detail in <a href="#server-client-behavior-kickuser" class="xref">Section 3.2.8</a> </p>
<h1 id="rfc.section.2.2.10">
<a href="#rfc.section.2.2.10">2.2.10.</a> <a href="#MuteUser" id="MuteUser">MuteUser</a>
</h1>
<p id="rfc.section.2.2.10.p.1">On the scenario that an admin wishes to mute a user in the server, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.10.p.2">{"mtp": "MuteUser", "data": {"name": "username"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>MuteUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All MuteUser messages have this value set to "MuteUser"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Name of the user to be muted in the server</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.10.p.3">Behavior is discussed in detail in <a href="#server-client-behavior-muteuser" class="xref">Section 3.2.9</a> </p>
<h1 id="rfc.section.2.2.11">
<a href="#rfc.section.2.2.11">2.2.11.</a> <a href="#UnmuteUser" id="UnmuteUser">UnmuteUser</a>
</h1>
<p id="rfc.section.2.2.11.p.1">On the scenario that an admin wishes to unmute a user in the server, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.11.p.2">{"mtp": "UnmuteUser", "data": {"name": "username"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>UnmuteUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All UnmuteUser messages have this value set to "UnmuteUser"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Name of the user to be unmuted in the server</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.11.p.3">Behavior is discussed in detail in <a href="#server-client-behavior-unmuteuser" class="xref">Section 3.2.10</a> </p>
<h1 id="rfc.section.2.2.12">
<a href="#rfc.section.2.2.12">2.2.12.</a> <a href="#SetAsAdmin" id="SetAsAdmin">SetAsAdmin</a>
</h1>
<p id="rfc.section.2.2.12.p.1">On the scenario that an admin wishes to set another user as the admin, this message will be sent to the server. A sample message of this format is shown below: </p>
<p id="rfc.section.2.2.12.p.2">{"mtp": "SetAsAdmin", "data": {"name": "username"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SetAsAdmin Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SetAsAdmin messages have this value set to "SetAsAdmin"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Name of the user to be set as the new admin in the server</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.12.p.3">Behavior is discussed in detail in <a href="#server-client-behavior-setasadmin" class="xref">Section 3.2.11</a> </p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> <a href="#clientbound" id="clientbound">Clientbound Messages</a>
</h1>
<h1 id="rfc.section.2.3.1">
<a href="#rfc.section.2.3.1">2.3.1.</a> <a href="#AssignUsername" id="AssignUsername">AssignUsername</a>
</h1>
<p id="rfc.section.2.3.1.p.1">This is the message sent by the server to the client after receiving a Login message.  </p>
<p id="rfc.section.2.3.1.p.2">If the requested username is valid: </p>
<p id="rfc.section.2.3.1.p.3">{"mtp": "AssignUsername", "data": {"name": "username"}, "status": "OK"} </p>
<p id="rfc.section.2.3.1.p.4">If the requested username has a duplicate: </p>
<p id="rfc.section.2.3.1.p.5">{"mtp": "AssignUsername", "data": {"name": "username"}, "status": "DuplicateError"} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>AssignUsername Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All AssignUsername messages have this value set to "AssignUsername"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Accepted / Rejected username.</td>
</tr>
<tr>
<td class="left">status</td>
<td class="left">Enum: String</td>
<td class="center">Possible values: "OK", "DuplicateError". Status of the Login message previously sent.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.2">
<a href="#rfc.section.2.3.2">2.3.2.</a> <a href="#ServerSetUsername" id="ServerSetUsername">SetUsername</a>
</h1>
<p id="rfc.section.2.3.2.p.1">This is the message sent by the server to the client after receiving a SetUsername message.  </p>
<p id="rfc.section.2.3.2.p.2">If the requested username is valid: </p>
<p id="rfc.section.2.3.2.p.3">{"mtp": "SetUsername", "data": {"name": "username"}, "status": "OK"} </p>
<p id="rfc.section.2.3.2.p.4">If the requested username has a duplicate: </p>
<p id="rfc.section.2.3.2.p.5">{"mtp": "SetUsername", "data": {"name": "username"}, "status": "DuplicateError"} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SetUsername Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SetUsername messages have this value set to "SetUsername"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Accepted / Rejected username.</td>
</tr>
<tr>
<td class="left">status</td>
<td class="left">Enum: String</td>
<td class="center">Possible values: "OK", "DuplicateError". Status of the SetUsername message previously sent by the client.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.3">
<a href="#rfc.section.2.3.3">2.3.3.</a> <a href="#ProvideUserInfo" id="ProvideUserInfo">ProvideUserInfo</a>
</h1>
<p id="rfc.section.2.3.3.p.1">This is the message sent by the server to the client after receiving a RequestUserInfo message.  </p>
<p id="rfc.section.2.3.3.p.2">If the requested user is online the server: </p>
<p id="rfc.section.2.3.3.p.3">{"mtp": "ProvideUserInfo", "data": {"name": "username", "ip": "192.168.1.1", "port": 15151}, "status": "OK"} </p>
<p id="rfc.section.2.3.3.p.4">If the requested user does not exist: </p>
<p id="rfc.section.2.3.3.p.5">{"mtp": "ProvideUserInfo", "data": {"name": "username", "ip": "192.168.1.1", "port": 15151}, "status": "UserDoesNotExist"} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>ProvideUserInfo Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All ProvideUserInfo messages have this value set to "ProvideUserInfo"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Name of the requested user.</td>
</tr>
<tr>
<td class="left">ip</td>
<td class="left">string</td>
<td class="center">IP of the requested user.</td>
</tr>
<tr>
<td class="left">port</td>
<td class="left">integer</td>
<td class="center">Port of the requested user.</td>
</tr>
<tr>
<td class="left">status</td>
<td class="left">Enum: String</td>
<td class="center">Possible values: "OK", "UserDoesNotExist". Status of the RequestUserInfo message previously sent by the client.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.4">
<a href="#rfc.section.2.3.4">2.3.4.</a> <a href="#SendLocalTime" id="SendLocalTime">SendLocalTime</a>
</h1>
<p id="rfc.section.2.3.4.p.1">This is the message sent by the server to the client after receiving a RequestLocalTime message.  </p>
<p id="rfc.section.2.3.4.p.2">{"mtp": "SendLocalTime", "data": {"time": "08:30:55"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SendLocalTime Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SendLocalTime messages have this value set to "SendLocalTime"</td>
</tr>
<tr>
<td class="left">time</td>
<td class="left">string</td>
<td class="center">ISO 8601 formatted time.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.5">
<a href="#rfc.section.2.3.5">2.3.5.</a> <a href="#WhisperFromUser" id="WhisperFromUser">WhisperFromUser</a>
</h1>
<p id="rfc.section.2.3.5.p.1">This is the message sent by the server to the targetted client after receiving a WhisperToUser message. A private message sent to a user.  </p>
<p id="rfc.section.2.3.5.p.2">{"mtp": "WhisperFromUser", "data": {"from": "username", "message": "hi"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>WhisperFromUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All WhisperFromUser messages have this value set to "WhisperFromUser"</td>
</tr>
<tr>
<td class="left">from</td>
<td class="left">string</td>
<td class="center">Name of the user who sent the message.</td>
</tr>
<tr>
<td class="left">message</td>
<td class="left">string</td>
<td class="center">Private message content.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.6">
<a href="#rfc.section.2.3.6">2.3.6.</a> <a href="#SendChatFromUser" id="SendChatFromUser">SendChatFromUser</a>
</h1>
<p id="rfc.section.2.3.6.p.1">This is the message sent by the server to all clients except the source after receiving a SendChat message.  </p>
<p id="rfc.section.2.3.6.p.2">{"mtp": "SendChatFromUser", "data": {"name": "username", "message": "hi"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SendChatFromUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SendChatFromUser messages have this value set to "SendChatFromUser"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Name of the user who sent the message.</td>
</tr>
<tr>
<td class="left">message</td>
<td class="left">string</td>
<td class="center">Message content.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.7">
<a href="#rfc.section.2.3.7">2.3.7.</a> <a href="#SendOnlineList" id="SendOnlineList">SendOnlineList</a>
</h1>
<p id="rfc.section.2.3.7.p.1">This is the message sent by the server after receiving a RequestOnlineList message.  </p>
<p id="rfc.section.2.3.7.p.2">{"mtp": "SendOnlineList", "data": {"names": ["user1", "user2", "user3"]}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SendOnlineList Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SendOnlineList messages have this value set to "SendOnlineList"</td>
</tr>
<tr>
<td class="left">names</td>
<td class="left">array of string</td>
<td class="center">Name of the users who are online in the server.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.8">
<a href="#rfc.section.2.3.8">2.3.8.</a> <a href="#ServerKickUser" id="ServerKickUser">KickUser</a>
</h1>
<p id="rfc.section.2.3.8.p.1">This is the message sent by the server after receiving a KickUser message from the client.  </p>
<p id="rfc.section.2.3.8.p.2">If a kick is successful: </p>
<p id="rfc.section.2.3.8.p.3">{"mtp": "KickUser", "data": {}, status="OK"} </p>
<p id="rfc.section.2.3.8.p.4">If the requesting client is not an admin: </p>
<p id="rfc.section.2.3.8.p.5">{"mtp": "KickUser", "data": {}, status="NotAdminError"} </p>
<p id="rfc.section.2.3.8.p.6">If the requested user is not online in the server: </p>
<p id="rfc.section.2.3.8.p.7">{"mtp": "KickUser", "data": {}, status="UserDoesNotExist"} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>KickUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All KickUser messages have this value set to "KickUser"</td>
</tr>
<tr>
<td class="left">status</td>
<td class="left">Enum: String</td>
<td class="center">Possible values: "OK", "UserDoesNotExist", "NotAdminError". Status of the KickUser message previously sent by the client.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.9">
<a href="#rfc.section.2.3.9">2.3.9.</a> <a href="#ServerMuteUser" id="ServerMuteUser">MuteUser</a>
</h1>
<p id="rfc.section.2.3.9.p.1">This is the message sent by the server after receiving a MuteUser message from the client.  </p>
<p id="rfc.section.2.3.9.p.2">If a mute is successful: </p>
<p id="rfc.section.2.3.9.p.3">{"mtp": "MuteUser", "data": {}, status="OK"} </p>
<p id="rfc.section.2.3.9.p.4">If the requesting client is not an admin: </p>
<p id="rfc.section.2.3.9.p.5">{"mtp": "MuteUser", "data": {}, status="NotAdminError"} </p>
<p id="rfc.section.2.3.9.p.6">If the requested user is not online in the server: </p>
<p id="rfc.section.2.3.9.p.7">{"mtp": "MuteUser", "data": {}, status="UserDoesNotExist"} </p>
<p id="rfc.section.2.3.9.p.8">If the requested user is already muted: </p>
<p id="rfc.section.2.3.9.p.9">{"mtp": "MuteUser", "data": {}, status="UserAlreadyMuted"} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>MuteUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All MuteUser messages have this value set to "MuteUser"</td>
</tr>
<tr>
<td class="left">status</td>
<td class="left">Enum: String</td>
<td class="center">Possible values: "OK", "UserDoesNotExist", "NotAdminError", "UserAlreadyMuted".  Status of the MuteUser message previously sent by the client.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.10">
<a href="#rfc.section.2.3.10">2.3.10.</a> <a href="#ServerUnmuteUser" id="ServerUnmuteUser">UnmuteUser</a>
</h1>
<p id="rfc.section.2.3.10.p.1">This is the message sent by the server after receiving a UnmuteUser message from the client.  </p>
<p id="rfc.section.2.3.10.p.2">If an unmute is successful: </p>
<p id="rfc.section.2.3.10.p.3">{"mtp": "UnmuteUser", "data": {}, status="OK"} </p>
<p id="rfc.section.2.3.10.p.4">If the requesting client is not an admin: </p>
<p id="rfc.section.2.3.10.p.5">{"mtp": "UnmuteUser", "data": {}, status="NotAdminError"} </p>
<p id="rfc.section.2.3.10.p.6">If the requested user is not online in the server: </p>
<p id="rfc.section.2.3.10.p.7">{"mtp": "UnmuteUser", "data": {}, status="UserDoesNotExist"} </p>
<p id="rfc.section.2.3.10.p.8">If the requested user is already unmuted: </p>
<p id="rfc.section.2.3.10.p.9">{"mtp": "UnmuteUser", "data": {}, status="UserAlreadyUnmuted"} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>UnmuteUser Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All UnmuteUser messages have this value set to "UnmuteUser"</td>
</tr>
<tr>
<td class="left">status</td>
<td class="left">Enum: String</td>
<td class="center">Possible values: "OK", "UserDoesNotExist", "NotAdminError", "UserAlreadyUnmuted".  Status of the UnmuteUser message previously sent by the client.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.11">
<a href="#rfc.section.2.3.11">2.3.11.</a> <a href="#ServerSetAsAdmin" id="ServerSetAsAdmin">SetAsAdmin</a>
</h1>
<p id="rfc.section.2.3.11.p.1">This is the message sent by the server after receiving a SetAsAdmin message from the client.  </p>
<p id="rfc.section.2.3.11.p.2">If an admin privilege transfer is successful: </p>
<p id="rfc.section.2.3.11.p.3">{"mtp": "SetAsAdmin", "data": {}, status="OK"} </p>
<p id="rfc.section.2.3.11.p.4">If the requesting client is not an admin: </p>
<p id="rfc.section.2.3.11.p.5">{"mtp": "SetAsAdmin", "data": {}, status="NotAdminError"} </p>
<p id="rfc.section.2.3.11.p.6">If the requested user is not online in the server: </p>
<p id="rfc.section.2.3.11.p.7">{"mtp": "SetAsAdmin", "data": {}, status="UserDoesNotExist"} </p>
<p id="rfc.section.2.3.11.p.8">If the requested user is already an admin, (i.e. client set self as an admin): </p>
<p id="rfc.section.2.3.11.p.9">{"mtp": "SetAsAdmin", "data": {}, status="AlreadyAdmin"} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SetAsAdmin Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SetAsAdmin messages have this value set to "SetAsAdmin"</td>
</tr>
<tr>
<td class="left">status</td>
<td class="left">Enum: String</td>
<td class="center">Possible values: "OK", "UserDoesNotExist", "NotAdminError", "AlreadyAdmin".  Status of the KickUser message previously sent by the client.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.12">
<a href="#rfc.section.2.3.12">2.3.12.</a> <a href="#ServerMessage" id="ServerMessage">ServerMessage</a>
</h1>
<p id="rfc.section.2.3.12.p.1">This is the message sent by the server to the client for general purposes (e.g. announcements).  </p>
<p id="rfc.section.2.3.12.p.2">{"mtp": "ServerMessage", "data": {"message": "user has been kicked from the server."}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>ServerMessage Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All ServerMessage messages have this value set to "ServerMessage"</td>
</tr>
<tr>
<td class="left">message</td>
<td class="left">string</td>
<td class="center">Message content</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.3.13">
<a href="#rfc.section.2.3.13">2.3.13.</a> <a href="#ServerDisconnect" id="ServerDisconnect">Disconnect</a>
</h1>
<p id="rfc.section.2.3.13.p.1">This is the message sent by the server on terminating the connection. The reason for disconnecting is also included in the message.  </p>
<p id="rfc.section.2.3.13.p.2">{"mtp": "Disconnect", "data": {"message": "Server closing."}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Disconnect Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All Disconnect messages have this value set to "Disconnect"</td>
</tr>
<tr>
<td class="left">message</td>
<td class="left">string</td>
<td class="center">Reason for disconnecting.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.4">
<a href="#rfc.section.2.4">2.4.</a> <a href="#peer2peer" id="peer2peer">Peer-Peer Messages</a>
</h1>
<h1 id="rfc.section.2.4.1">
<a href="#rfc.section.2.4.1">2.4.1.</a> <a href="#Discovery" id="Discovery">Discovery</a>
</h1>
<p id="rfc.section.2.4.1.p.1">Type: Broadcasted </p>
<p id="rfc.section.2.4.1.p.2">Discovery message is sent to the broadcast network to ping the list of active peers.  This queries the hostnames and usernames of these peers. This is not completely necessary to implement if you will add a feature that will connect the peer to another by manually inputting the ip and port of the peer. However, it is strongly recommended you implement this message to ensure smooth testing.  </p>
<p id="rfc.section.2.4.1.p.3">{"mtp": "Discovery", "data": {"ip": "192.168.1.1", "port": 15151}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Discovery Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All Discovery messages have this value set to "Discovery"</td>
</tr>
<tr>
<td class="left">ip</td>
<td class="left">string</td>
<td class="center">IP of the querying peer.</td>
</tr>
<tr>
<td class="left">port</td>
<td class="left">integer</td>
<td class="center">Port of the querying peer.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.4.2">
<a href="#rfc.section.2.4.2">2.4.2.</a> <a href="#DiscoveryResponse" id="DiscoveryResponse">DiscoveryResponse</a>
</h1>
<p id="rfc.section.2.4.2.p.1">Type: Direct / Single </p>
<p id="rfc.section.2.4.2.p.2">DiscoveryResponse is sent by peers who are active in the network.  </p>
<p id="rfc.section.2.4.2.p.3">{"mtp": "DiscoveryResponse", "data": {"ip": "192.168.1.1", "port": 15151,"name": "username"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>DiscoveryResponse Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All DiscoveryResponse messages have this value set to "DiscoveryResponse"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Username of the responding peer.</td>
</tr>
<tr>
<td class="left">ip</td>
<td class="left">string</td>
<td class="center">IP of the responding peer.</td>
</tr>
<tr>
<td class="left">port</td>
<td class="left">string</td>
<td class="center">Port of the responding peer.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.4.3">
<a href="#rfc.section.2.4.3">2.4.3.</a> <a href="#Handshake" id="Handshake">Handshake</a>
</h1>
<p id="rfc.section.2.4.3.p.1">Type: Broadcasted </p>
<p id="rfc.section.2.4.3.p.2">The handshake message is required to be sent for each scenario wherein a new peer-peer joins a network. There may be peers active in the network or not but this message type attempts to ensure that the username to be used by the entering peer is not a duplicate of another user existing in the network.  </p>
<p id="rfc.section.2.4.3.p.3">{"mtp": "Handshake", "data": {"ip": "192.168.0.1", "port": 15151, "name": "new_peer"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Handshake Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All Handshake messages have this value set to "Handshake"</td>
</tr>
<tr>
<td class="left">ip</td>
<td class="left">string</td>
<td class="center">IP of the peer broadcasting the Handshake</td>
</tr>
<tr>
<td class="left">port</td>
<td class="left">integer</td>
<td class="center">Port of the peer broadcasting the Handshake.</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Username that is being broadcasted to all the other peers in the network for validation.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.4.4">
<a href="#rfc.section.2.4.4">2.4.4.</a> <a href="#HandshakeResponse" id="HandshakeResponse">HandshakeResponse</a>
</h1>
<p id="rfc.section.2.4.4.p.1">Type: Direct / Single </p>
<p id="rfc.section.2.4.4.p.2">The Handshake Response is sent back by peers active in the network to the ip and port found in the Handshake message sent by new peers attempting to join the network. This message type can only be sent if the peer is considered as active in the network and the peer has a valid username.  </p>
<p id="rfc.section.2.4.4.p.3">If the username contained in the Handshake is not equal to the username held by the responding peer: {"mtp": "HandshakeResponse", "data": {"name": "username"}, "status": "OK"} </p>
<p id="rfc.section.2.4.4.p.4">If the username contained in the Handshake is equal to the username held by the responding peer: {"mtp": "HandshakeResponse", "data": {"name": "username"}, "status": "DuplicateError"} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>HandshakeResponse Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All HandshakeResponse messages have this value set to "HandshakeResponse"</td>
</tr>
<tr>
<td class="left">name</td>
<td class="left">string</td>
<td class="center">Accepted/Rejected username.</td>
</tr>
<tr>
<td class="left">status</td>
<td class="left">Enum: String</td>
<td class="center">Possible values: "OK", "DuplicateError". Validation status of the Handshake message received prior to sending this message.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.4.5">
<a href="#rfc.section.2.4.5">2.4.5.</a> <a href="#PeerSendChat" id="PeerSendChat">SendChat</a>
</h1>
<p id="rfc.section.2.4.5.p.1">Type: Broadcasted </p>
<p id="rfc.section.2.4.5.p.2">SendChat is a message format for general chat messages.  </p>
<p id="rfc.section.2.4.5.p.3">{"mtp": "SendChat", "data": {"message": "hi"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>SendChat Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All SendChat messages have this value set to "SendChat"</td>
</tr>
<tr>
<td class="left">message</td>
<td class="left">string</td>
<td class="center">Message content.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.4.6">
<a href="#rfc.section.2.4.6">2.4.6.</a> <a href="#Whisper" id="Whisper">Whisper</a>
</h1>
<p id="rfc.section.2.4.6.p.1">Type: Direct / Single </p>
<p id="rfc.section.2.4.6.p.2">Whisper is a message format for private chat messages.  </p>
<p id="rfc.section.2.4.6.p.3">{"mtp": "Whisper", "data": {"message": "hi"}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Whisper Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All Whisper messages have this value set to "Whisper"</td>
</tr>
<tr>
<td class="left">message</td>
<td class="left">string</td>
<td class="center">Private message content.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.4.7">
<a href="#rfc.section.2.4.7">2.4.7.</a> <a href="#PeerDisconnect" id="PeerDisconnect">Disconnect</a>
</h1>
<p id="rfc.section.2.4.7.p.1">Type: Any </p>
<p id="rfc.section.2.4.7.p.2">Peers send a Disconnect message to inform other peers on leaving the network.  </p>
<p id="rfc.section.2.4.7.p.3">{"mtp": "Disconnect", "data": {}} </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Disconnect Fields</caption>
<thead><tr>
<th class="left">Field Name</th>
<th class="left">Data Type</th>
<th class="center">Description</th>
</tr></thead>
<tbody><tr>
<td class="left">mtp</td>
<td class="left">string</td>
<td class="center">MessageType. All Disconnect messages have this value set to "Disconnect"</td>
</tr></tbody>
</table>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#server-client" id="server-client">Server-Client Model</a>
</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#server-client-state" id="server-client-state">States / Phases</a>
</h1>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> <a href="#server-client-state-login" id="server-client-state-login">Login</a>
</h1>
<div id="rfc.figure.1"></div>
<div id="login-diagram"></div>
<pre>
    +----------+                             +----------+
    |  Client  |&gt;---------| Login |---------&gt;|  Server  |
    +----------+      username: "Daren"      +----------+

    +----------+                             +----------+
    |  Client  |&lt;&lt;---| AssignUsername |----&lt;&lt;|  Server  |
    +----------+         status: "OK"        +----------+

    +----------+                             +----------+
    |  Client  |&lt;&lt;-------------------------&gt;&gt;|  Server  |
    +----------+          Connected          +----------+
                            </pre>
<p class="figure">Figure 1</p>
<p id="rfc.section.3.1.1.p.1">The Login States include sending username from client to server and sending "OK" status from server to client to ensure both are connected.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#server-client-behavior" id="server-client-behavior">Request-Response Behavior</a>
</h1>
<h1 id="rfc.section.3.2.1">
<a href="#rfc.section.3.2.1">3.2.1.</a> <a href="#server-client-behavior-changename" id="server-client-behavior-changename">SetUsername</a>
</h1>
<div id="rfc.figure.2"></div>
<div id="SetUsername-diagram"></div>
<pre>
    +----------+                             +----------+
    |  Client  |&gt;------| SetUsername |------&gt;|  Server  |
    +----------+      SetUsername: "Daren"   +----------+

    +----------+                             +----------+
    |  Client  |&lt;&lt;-----| SetUsername |-----&lt;&lt;|  Server  |
    +----------+         status: "OK"        +----------+

    +----------+                             +----------+
    |  Client  |&lt;&lt;-----| SetUsername |-----&lt;&lt;|  Server  |
    +----------+     status: "DuplicateError"+----------+
                            </pre>
<p class="figure">Figure 2</p>
<p id="rfc.section.3.2.1.p.1">The SetUsername States include sending new username from client to server and sending "OK" or "DuplicateError" status from server to client to set client's new username.  </p>
<h1 id="rfc.section.3.2.2">
<a href="#rfc.section.3.2.2">3.2.2.</a> <a href="#server-client-behavior-userinfo" id="server-client-behavior-userinfo">UserInfo</a>
</h1>
<div id="rfc.figure.3"></div>
<div id="Userinfo-diagram"></div>
<pre>
    +----------+                             +----------+
    |  Client  |&gt;----| RequestUserInfo |----&gt;|  Server  |
    +----------+      SetUsername: "Daren"   +----------+

    +----------+                             +----------+
    |  Client  |&lt;&lt;---| ProvideUserInfo |---&lt;&lt;|  Server  |
    +----------+         status: "OK"        +----------+

     +----------+                             +----------+
    |  Client  |&lt;&lt;---| ProvideUserInfo |---&lt;&lt;|  Server  |
    +----------+   status: "UserDoesNotExist" +----------+

                            </pre>
<p class="figure">Figure 3</p>
<p id="rfc.section.3.2.2.p.1">The UserInfo States include sending username from client to server and sending "OK" or "UserDoesNotExist" status from server to client along with user information if it exists.  </p>
<h1 id="rfc.section.3.2.3">
<a href="#rfc.section.3.2.3">3.2.3.</a> <a href="#server-client-behavior-localtime" id="server-client-behavior-localtime">LocalTime</a>
</h1>
<div id="rfc.figure.4"></div>
<div id="Localtime-diagram"></div>
<pre>
    +----------+                             +----------+
    |  Client  |&gt;----| RequestLocalTime |---&gt;|  Server  |
    +----------+                             +----------+

    +----------+                             +----------+
    |  Client  |&lt;&lt;---| SendLocalTime |---&lt;&lt;|  Server  |
    +----------+       time: "00:00:00"      +----------+



                            </pre>
<p class="figure">Figure 4</p>
<p id="rfc.section.3.2.3.p.1">The LocalTime States include a request from client to server and the local time response from server to client.  </p>
<h1 id="rfc.section.3.2.4">
<a href="#rfc.section.3.2.4">3.2.4.</a> <a href="#server-client-behavior-whisper" id="server-client-behavior-whisper">Whisper</a>
</h1>
<div id="rfc.figure.5"></div>
<div id="Whisper-diagram"></div>
<pre>
+----------+                           +----------+     +----------+
|  Client  |&gt;----| WhisperToUser |----&gt;|  Server  |     | Client_B |
+----------+        To: "Client_B"     +----------+     +----------+

+----------+                           +----------+ msg +----------+
|  Client  |                           |  Server  |----&gt;| Client_B |
+----------+                           +----------+     +----------+

+----------+                           +----------+     +----------+
|  Client  |&lt;&lt;---| ServerMessage |---&lt;&lt;|  Server  |     | Client_B |
+----------+ message:"UserDoesNotExist"+----------+     +----------+



                            </pre>
<p class="figure">Figure 5</p>
<p id="rfc.section.3.2.4.p.1">The Whisper States include the client sending a list of clients to be sent a message and the message itself, and the server sending the message only to the listed clients. If a user does not exist in the list of clients, a UserDoesNotExist meessage will be returned to the client from the server.  </p>
<h1 id="rfc.section.3.2.5">
<a href="#rfc.section.3.2.5">3.2.5.</a> <a href="#server-client-behavior-sendchat" id="server-client-behavior-sendchat">SendChat</a>
</h1>
<div id="rfc.figure.6"></div>
<div id="SendChat-diagram"></div>
<pre>
+----------+          +---------+
|          | SendChat |         |
|  Client1 +---------&gt;+ Server  |
|          |   msg    |         |
+----------+          +----+----+
                           |
                           |
             +----------------------------+
             |             |              |
             |             |              |
             |msg          |msg           |msg
             |             v              v
       +-----v-----+ +-----+-----+  +-----+-----+
       |           | |           |  |           |
       |  Client2  | |  Client3  |  |  Client4  |
       |           | |           |  |           |
       +-----------+ +-----------+  +-----------+


                            </pre>
<p class="figure">Figure 6</p>
<p id="rfc.section.3.2.5.p.1">The SendChat States include the client sending a message to the server and the server sending the message to all other clients connected except the client that sent the message.  </p>
<h1 id="rfc.section.3.2.6">
<a href="#rfc.section.3.2.6">3.2.6.</a> <a href="#server-client-behavior-onlinelist" id="server-client-behavior-onlinelist">OnlineList</a>
</h1>
<div id="rfc.figure.7"></div>
<div id="OnlineList-diagram"></div>
<pre>
    +----------+                             +----------+
    |  Client  |&gt;---| RequestOnlineList |---&gt;|  Server  |
    +----------+                             +----------+

    +----------+                            +----------+
    |  Client  |&lt;&lt;---| SendOnlineList |---&lt;&lt;|  Server  |
    +----------+                            +----------+



                            </pre>
<p class="figure">Figure 7</p>
<p id="rfc.section.3.2.6.p.1">The OnlineList States include the client requesting usernames currently connected to server and the server sending the list of usernames to the client.  </p>
<h1 id="rfc.section.3.2.7">
<a href="#rfc.section.3.2.7">3.2.7.</a> <a href="#server-client-behavior-disconnect" id="server-client-behavior-disconnect">Disconnect</a>
</h1>
<div id="rfc.figure.8"></div>
<div id="Disconnect-diagram"></div>
<pre>
    +----------+                             +----------+
    |  Client  |&gt;-------| Disconnect |------&gt;|  Server  |
    +----------+                             +----------+

                                             +----------+
                                             |  Server  |
                                             +----------+



                            </pre>
<p class="figure">Figure 8</p>
<p id="rfc.section.3.2.7.p.1">The Disconnect State includes the client sending a disconnect message to the server. Client and server are disconnected.  </p>
<h1 id="rfc.section.3.2.8">
<a href="#rfc.section.3.2.8">3.2.8.</a> <a href="#server-client-behavior-kickuser" id="server-client-behavior-kickuser">KickUser</a>
</h1>
<div id="rfc.figure.9"></div>
<div id="KickUser-diagram"></div>
<pre>
    +----------+                             +----------+
    |  Client  |&gt;--------| KickUser |-------&gt;|  Server  |
    +----------+      name : "Client2"       +----------+

    +----------+                            +----------+
    |  Client  |&lt;&lt;------| KickUser |------&lt;&lt;|  Server  |
    +----------+      status : "OK"         +----------+
    
    +----------+                            +----------+
    |  Client  |&lt;&lt;------| KickUser |------&lt;&lt;|  Server  |
    +----------+  status : "NotAdminError"  +----------+

    +----------+                            +----------+
    |  Client  |&lt;&lt;------| KickUser |------&lt;&lt;|  Server  |
    +----------+ status : "UserDoesNotExist"+----------+



                            </pre>
<p class="figure">Figure 9</p>
<p id="rfc.section.3.2.8.p.1">The KickUser States include the client, as an admin user, requesting to kick a client from the server and a status response from server to client. A client is successfully kicked from the server when status "OK" is sent from server to client.  A request can be rejected with status "NotAdminError" if the requesting client is not an admin user, or with status "UserDoesNotExist" if requested client does not exist.  </p>
<h1 id="rfc.section.3.2.9">
<a href="#rfc.section.3.2.9">3.2.9.</a> <a href="#server-client-behavior-muteuser" id="server-client-behavior-muteuser">MuteUser</a>
</h1>
<div id="rfc.figure.10"></div>
<div id="MuteUser-diagram"></div>
<pre>
    +----------+                             +----------+
    |  Client  |&gt;--------| MuteUser |-------&gt;|  Server  |
    +----------+      name : "Client2"       +----------+

    +----------+                            +----------+
    |  Client  |&lt;&lt;------| MuteUser |------&lt;&lt;|  Server  |
    +----------+      status : "OK"         +----------+
    
    +----------+                            +----------+
    |  Client  |&lt;&lt;------| MuteUser |------&lt;&lt;|  Server  |
    +----------+  status : "NotAdminError"  +----------+

    +----------+                            +----------+
    |  Client  |&lt;&lt;------| MuteUser |------&lt;&lt;|  Server  |
    +----------+ status : "UserDoesNotExist"+----------+
    
    +----------+                            +----------+
    |  Client  |&lt;&lt;------| MuteUser |------&lt;&lt;|  Server  |
    +----------+ status : "UserAlreadyMuted"+----------+

                            </pre>
<p class="figure">Figure 10</p>
<p id="rfc.section.3.2.9.p.1">The MuteUser States include the client, as an admin user, requesting to mute a client and a status response from server to client. A client's chat abilities are successfully disabled when a status "OK" is sent from server to client. If the client is already muted, status "UserAlreadyMuted" is sent. A request can be rejected with status "NotAdminError" if the requesting client is not an admin user, or with status "UserDoesNotExist" if requested client does not exist.  </p>
<h1 id="rfc.section.3.2.10">
<a href="#rfc.section.3.2.10">3.2.10.</a> <a href="#server-client-behavior-unmuteuser" id="server-client-behavior-unmuteuser">UnmuteUser</a>
</h1>
<div id="rfc.figure.11"></div>
<div id="UnmuteUser-diagram"></div>
<pre>
    +----------+                               +----------+
    |  Client  |&gt;--------| UnmuteUser |-------&gt;|  Server  |
    +----------+      name : "Client2"         +----------+

    +----------+                              +----------+
    |  Client  |&lt;&lt;------| UnmuteUser |------&lt;&lt;|  Server  |
    +----------+      status : "OK"           +----------+
    
    +----------+                              +----------+
    |  Client  |&lt;&lt;------| UnmuteUser |------&lt;&lt;|  Server  |
    +----------+  status : "NotAdminError"    +----------+

    +----------+                              +----------+
    |  Client  |&lt;&lt;------| UnmuteUser |------&lt;&lt;|  Server  |
    +----------+ status : "UserDoesNotExist"  +----------+

    +----------+                              +----------+
    |  Client  |&lt;&lt;------| UnmuteUser |------&lt;&lt;|  Server  |
    +----------+ status : "UserNotMuted"      +----------+

                            </pre>
<p class="figure">Figure 11</p>
<p id="rfc.section.3.2.10.p.1">The UnmuteUser States include the client, as an admin user, requesting to mute a client and a status response from server to client. A client's chat abilities are successfully enabled when a status "OK" is sent from server to client. If the client is not muted, status "UserNotMuted" is sent. A request can be rejected with status "NotAdminError" if the requesting client is not an admin user, or with status "UserDoesNotExist" if requested client does not exist.  </p>
<h1 id="rfc.section.3.2.11">
<a href="#rfc.section.3.2.11">3.2.11.</a> <a href="#server-client-behavior-setasadmin" id="server-client-behavior-setasadmin">SetAsAdmin</a>
</h1>
<div id="rfc.figure.12"></div>
<div id="SetAsAdmin-diagram"></div>
<pre>
    +----------+                               +----------+
    |  Client  |&gt;--------| SetAsAdmin |-------&gt;|  Server  |
    +----------+      name : "Client2"         +----------+

    +----------+                              +----------+
    |  Client  |&lt;&lt;------| SetAsAdmin |------&lt;&lt;|  Server  |
    +----------+      status : "OK"           +----------+
    
    +----------+                              +----------+
    |  Client  |&lt;&lt;------| SetAsAdmin |------&lt;&lt;|  Server  |
    +----------+  status : "NotAdminError"    +----------+

    +----------+                              +----------+
    |  Client  |&lt;&lt;------| SetAsAdmin |------&lt;&lt;|  Server  |
    +----------+ status : "UserDoesNotExist"  +----------+

    +----------+                              +----------+
    |  Client  |&lt;&lt;------| SetAsAdmin|------&lt;&lt;|  Server  |
    +----------+ status : "AlreadyAdmin"      +----------+

                            </pre>
<p class="figure">Figure 12</p>
<p id="rfc.section.3.2.11.p.1">The SetAsAdmin States include the client, as admin user, granting admin priveleges to another client and a status response from server to client.  Another client is successfully granted admin priveleges when status "OK" is sent from server to admin user. If the client is already an admin user, status "AlreadyAdmin" is sent. Granting admin privileges could be rejected with status "NotAdminError" if the requesting client is not an admin user, or with status "UserDoesNotExist" if requested client does not exist.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#peer-peer" id="peer-peer">Peer-Peer Model</a>
</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#peer-peer-discovery" id="peer-peer-discovery">Discovery</a>
</h1>
<div id="rfc.figure.13"></div>
<div id="Discovery-diagram"></div>
<pre>
                      +---------+
                      | NewPeer |
                      +----+----+
                           |
                           |
             +----------------------------+
             |             |              |
             |Discovery    |Discovery     |Discovery
             |             |              |
       +-----v-----+ +-----v-----+  +-----v-----+
       |   Peer1   | |   Peer2   |  |   Peer3   |
       +-----------+ +-----------+  +-----------+
                        </pre>
<p class="figure">Figure 13</p>
<p id="rfc.section.4.1.p.1">Discovery is the message sent by a peer to the network. This is a broadcasted message, therefore all peers who wish to respond must be listening to the same port set by the first peer. This is only a query message and not an attempt to connect with other peers.  </p>
<div id="rfc.figure.14"></div>
<div id="DiscoveryResponse-diagram"></div>
<pre>
                      +---------+
                      |         |
             |-------&gt;| NewPeer |&lt;--------|
             |        |         |         |
             |        +----+----+         |
             |             ^              |
             |             |              |
             |Discovery    |Discovery     |Discovery
             |Response     |Response      |Response 
             |             |              |
             |name:"peer1" |name:"peer2"  |name:"peer3"
             |             |              |
       +-----|-----+ +-----|-----+  +-----|-----+
       |           | |           |  |           |
       |   Peer1   | |   Peer2   |  |   Peer3   |
       |           | |           |  |           |
       +-----------+ +-----------+  +-----------+ 
                        </pre>
<p class="figure">Figure 14</p>
<p id="rfc.section.4.1.p.2">Peers should respond to the Discovery message with a DiscoveryResponse message. The requesting peer should take note of the usernames from the "name" field in the message for choosing a valid username for the next phase/state.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#peer-peer-handshake" id="peer-peer-handshake">Handshake</a>
</h1>
<div id="rfc.figure.15"></div>
<div id="Handshake-diagram"></div>
<pre>
                      +---------+
                      |  Peer4  |
                      +----+----+
                           |
             +----------------------------+
             |             |              |
             |Handshake    |Handshake     |Handshake
             |             |              |
       +-----v-----+ +-----v-----+  +-----v-----+
       |           | |           |  |           |
       |   Peer1   | |   Peer2   |  |   Peer3   |
       |           | |           |  |           |
       +-----------+ +-----------+  +-----------+
                            </pre>
<p class="figure">Figure 15</p>
<p id="rfc.section.4.2.p.1">Handshake message is the message sent by a peer that attempts to connect to other peers. This is a broadcasted message, meaning only peers listening to the same port in the subnet will receive this. Including in the message is the requested name, IP, and port.  </p>
<div id="rfc.figure.16"></div>
<div id="HandshakeResponse-diagram"></div>
<p id="rfc.section.4.2.p.2">HandshakeResponse is the message sent as a response to the Handshake message sent by a peer. The message includes the name, IP, and port of the peer who sent the message. The status code informs the peer if a connection has been established.  </p>

<p>In the scenario that the username was valid, the peer shall send a HandshakeResponse with a status field value of "OK".  </p>
<pre>

                      +---------+
             |-------&gt;|  Peer4  |&lt;--------|
             |        +----+----+         |
             |             ^              |
             |             |              |
             |             |              |
             |Handshake    |Handshake     |Handshake
             |Response     |Response      |Response
             |status: "OK" |status: "OK"  |status: "OK"
             |             |              |
       +-----|-----+ +-----|-----+  +-----|-----+
       |   Peer1   | |   Peer2   |  |   Peer3   |
       +-----------+ +-----------+  +-----------+ 

                        </pre>
<p class="figure">Figure 16</p>
<div id="rfc.figure.17"></div>
<div id="HandshakeResponseError-diagram"></div>
<p></p>

<p>In the scenario that the username was invalid of has a duplicate, the peer shall send a HandshakeResponse with a status field value of "DuplicateError".  </p>
<pre>
                        +----------+
             |---------&gt;|  Peer1   |&lt;-----------|
             |          +----------+            |
             |                ^                 |
             |                |                 |
             |                |                 |
        Handshake         Handshake          Handshake
        Response          Response           Response
        status:           status:            status:
     "DuplicateError"  "DuplicateError"   "DuplicateError"
             |                |                 |
       +-----|-----+    +-----|-----+     +-----|-----+
       |   Peer1   |    |   Peer2   |     |   Peer3   |
       +-----------+    +-----------+     +-----------+ 

                        </pre>
<p class="figure">Figure 17</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#peer-peer-disconnect" id="peer-peer-disconnect">Disconnect</a>
</h1>
<div id="rfc.figure.18"></div>
<div id="DisconnectPeer-diagram"></div>
<pre>
                      +---------+
                      |         |
                      |  Peer4  |
                      |         |
                      +----+----+
                           |
                           |
             +----------------------------+
             |             |              |
             |             |              |
             |Disconnect   |Disconnect    |Disconnect
             |             |              |
       +-----v-----+ +-----v-----+  +-----v-----+
       |           | |           |  |           |
       |   Peer1   | |   Peer2   |  |   Peer3   |
       |           | |           |  |           |
       +-----------+ +-----------+  +-----------+
                            </pre>
<p class="figure">Figure 18</p>
<p id="rfc.section.4.3.p.1">A peer sends a Disconnect message before leaving the network.  This can be either a Broadcast message or a Direct message to all peers.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#security-intro" id="security-intro">Introduction</a>
</h1>
<p id="rfc.section.5.1.p.1">This protocol will raise plenty of security vulnerabilities. This is expected as security was never considered in designing this protocol.  This section will simply discuss some of possible vulnerabilities.  </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#security-authentication" id="security-authentication">Authentication</a>
</h1>
<p id="rfc.section.5.2.p.1">There is no form of authentication in this protocol. The chat system is not anonymous yet anyone can choose a name.  </p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#security-encryption" id="security-encryption">Encryption</a>
</h1>
<p id="rfc.section.5.3.p.1">Private messages are easily sniffed by a packet sniffer like Wireshark.  The private messages are sent in plaintext and are therefore not secure.  </p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> <a href="#security-authenticity" id="security-authenticity">Authenticity</a>
</h1>
<p id="rfc.section.5.4.p.1">There is no method to ensure that the data has not been tampered with. There is no form of encrypted checksum encoded in the message.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">6.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">6.1.</a> Normative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC3470">[RFC3470]</b></td>
<td class="top">
<a title="VeriSign, Incorporated">Hollenbeck, S.</a>, <a title="Dover Beach Consulting, Incorporated">Rose, M.</a> and <a title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="https://tools.ietf.org/html/rfc3470">Guidelines for the Use of Extensible Markup Language (XML) within IETF Protocols</a>", RFC 3470, May 2013.<p>This is a primary reference work.</p>
</td>
</tr></tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">6.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC6949">[RFC6949]</b></td>
<td class="top">
<a>Flanagan, H.</a> and <a>N. Brownlee</a>, "<a href="https://tools.ietf.org/html/rfc6949">RFC Series Format Requirements and Future Development</a>", RFC 6949, May 2013.<p>This is a primary reference work.</p>
</td>
</tr></tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Keith Vargas</span> 
	  <span class="n hidden">
		<span class="family-name">Vargas</span>
	  </span>
	</span>
	<span class="org vcardline">Electrical and Electronics Engineering Institute</span>
	<span class="adr">
	  <span class="vcardline">P. Velasquez St.</span>

	  <span class="vcardline">
		<span class="locality">Quezon City</span>,  
		<span class="region">Metro Manila</span> 
		<span class="code">1101</span>
	  </span>
	  <span class="country-name vcardline">Philippines</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:keith.vargas@eee.upd.edu.ph">keith.vargas@eee.upd.edu.ph</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Philippe Ivan Balucan</span> 
	  <span class="n hidden">
		<span class="family-name">Balucan</span>
	  </span>
	</span>
	<span class="org vcardline">Electrical and Electronics Engineering Institute</span>
	<span class="adr">
	  <span class="vcardline">P. Velasquez St.</span>

	  <span class="vcardline">
		<span class="locality">Quezon City</span>,  
		<span class="region">Metro Manila</span> 
		<span class="code">1101</span>
	  </span>
	  <span class="country-name vcardline">Philippines</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:philippe.ivan.balucan@eee.upd.edu.ph">philippe.ivan.balucan@eee.upd.edu.ph</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Claudyne Trixie Uy</span> 
	  <span class="n hidden">
		<span class="family-name">Uy</span>
	  </span>
	</span>
	<span class="org vcardline">Electrical and Electronics Engineering Institute</span>
	<span class="adr">
	  <span class="vcardline">P. Velasquez St.</span>

	  <span class="vcardline">
		<span class="locality">Quezon City</span>,  
		<span class="region">Metro Manila</span> 
		<span class="code">1101</span>
	  </span>
	  <span class="country-name vcardline">Philippines</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:claudyne.trixie.uy@eee.upd.edu.ph">claudyne.trixie.uy@eee.upd.edu.ph</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Glorie Mae Mabanta</span> 
	  <span class="n hidden">
		<span class="family-name">Mabanta</span>
	  </span>
	</span>
	<span class="org vcardline">Electrical and Electronics Engineering Institute</span>
	<span class="adr">
	  <span class="vcardline">P. Velasquez St.</span>

	  <span class="vcardline">
		<span class="locality">Quezon City</span>,  
		<span class="region">Metro Manila</span> 
		<span class="code">1101</span>
	  </span>
	  <span class="country-name vcardline">Philippines</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mae.mabanta@eee.upd.edu.ph">mae.mabanta@eee.upd.edu.ph</a></span>

  </address>
</div>

</body>
</html>
